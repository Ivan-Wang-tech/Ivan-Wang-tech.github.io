<script>
let noiseOffset = 0, isHovering = false, stockData = [];

function setup() {
  let canvas = createCanvas(600, 100);
  canvas.parent('signature-container');

  canvas.mouseOver(() => { isHovering = true;  loop();  });
  canvas.mouseOut(  () => { isHovering = false; loop();  });

  textSize(36);
  strokeWeight(1);
  for (let i = 0; i < 20; i++) stockData.push(random(50,150));
}

function draw() {
  clear();
  if (isHovering) drawStockChart();
  else           drawSignature();
}

function drawSignature() {
  let s = "IVAN WANG", x = 50;
  for (let i = 0; i < s.length; i++) {
    let y = height/2 + sin(noiseOffset + i * 0.5) * 12;
    if (i < 4) {
      let g = drawingContext.createLinearGradient(x, y-15, x, y+15);
      g.addColorStop(0, '#00FFFF'); g.addColorStop(1, '#00FF00');
      drawingContext.fillStyle = g;
    } else { fill(0,255,0); }
    noStroke(); text(s[i], x, y); x += textWidth(s[i]);
  }
  noiseOffset += 0.02;
}

function drawStockChart() {
  let w = width / stockData.length;
  drawingContext.lineWidth = 1.2;
  for (let i = 0; i < stockData.length; i++) {
    let h = stockData[i], x = i*w + w/2, y = height/2;
    stockData[i] = constrain(stockData[i] + random(-2,2), 60, 140);
    let g = drawingContext.createLinearGradient(x, y-h/2, x, y+h/2);
    g.addColorStop(0,'#00FFFF'); g.addColorStop(1,'#009900');
    drawingContext.strokeStyle = g;
    line(x, y-h/2, x, y+h/2);
    noStroke(); fill(g); rectMode(CENTER);
    rect(x, y-h/2, w*0.5, 2); rect(x, y+h/2, w*0.5, 2);
  }
}
</script>
